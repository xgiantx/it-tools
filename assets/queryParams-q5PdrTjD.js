import{a as R,be as N,bf as _,ah as j,bg as m,b4 as k,q,C,n as D,b as J}from"./index-Br2O5Rg4.js";const g=new WeakMap;function S(e,u,a={}){const{mode:i="replace",route:r=R(),router:o=N(),transform:t}=a;let s=n=>n,p=n=>n;typeof t=="function"?s=t:t&&(t.get&&(s=t.get),t.set&&(p=t.set)),g.has(o)||g.set(o,new Map);const y=g.get(o);let f=r.query[e];_(()=>{f=void 0});let b;const h=j((n,l)=>(b=l,{get(){return n(),s(f!==void 0?f:m(u))},set(c){c=p(c),f!==c&&(f=c===m(u)?void 0:c,y.set(e,c===m(u)?void 0:c),l(),k(()=>{if(y.size===0)return;const x=Object.fromEntries(y.entries());y.clear();const{params:v,query:w,hash:O}=r;o[m(i)]({params:v,query:{...w,...x},hash:O})}))}}));return q(()=>r.query[e],n=>{f!==s(n)&&(f=n,b())},{flush:"sync"}),h}const Q={number:{fromQuery:e=>Number(e),toQuery:e=>String(e)},string:{fromQuery:e=>e,toQuery:e=>e},boolean:{fromQuery:e=>e.toLowerCase()==="true",toQuery:e=>e?"true":"false"},object:{fromQuery:e=>JSON.parse(e),toQuery:e=>JSON.stringify(e)}};function P({name:e,defaultValue:u}){const i=Q[typeof u]??Q.string,r=S(e,i.toQuery(u));return J({get(){return i.fromQuery(r.value)},set(o){r.value=i.toQuery(o)}})}function d({name:e,storageName:u,defaultValue:a}){const r=Q[typeof a]??Q.string,o=C(u,a),t=r.toQuery(a),s=S(e,t),p=D(a);return q(p,y=>{s.value=r.toQuery(y),o.value=y},{deep:!0}),p.value=s.value&&s.value!==t?r.fromQuery(s.value):o.value,p}export{P as a,d as u};
