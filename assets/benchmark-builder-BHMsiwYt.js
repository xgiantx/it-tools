import{d as M,f as $,o as w,g as h,a2 as K,e as T,m as e,F as U,h as A,j as n,by as O,bm as P,bz as E,aY as F,w as p,k as N,aZ as R,i as x,b4 as I,C as z,b as W,v as q,z as Y,x as Z,c as G,S as H,y as J,a6 as Q}from"./index-DtXg1mwU.js";import{_ as X}from"./InputNumber-CwTKn5eh.js";import{S as tt}from"./Scrollbar-Bd2orGPB.js";import{_ as et}from"./Divider-BC2Ea4r8.js";import{_ as nt}from"./FormItem-DugciXlR.js";import"./Input-U_bmmWoy.js";import"./Button-aLLQBEvM.js";import"./is-browser-DqcmxZSF.js";import"./use-form-item-85PEBv7I.js";import"./color-to-class-B0iQgAn2.js";import"./use-locale-1DqEhDbw.js";import"./Remove-DIxQgMAk.js";const ot={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},at=h("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("path",{d:"M12 5v14"}),h("path",{d:"M5 12h14"})],-1),st=[at],L=M({name:"Plus",render:function(s,l){return w(),$("svg",ot,st)}}),lt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},rt=K('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7h16"></path><path d="M10 11v6"></path><path d="M14 11v6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-12"></path><path d="M9 7V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3"></path></g>',1),it=[rt],D=M({name:"Trash",render:function(s,l){return w(),$("svg",lt,it)}});function B({data:o}){return o.length===0?0:T.sum(o)/o.length}function ut({data:o}){const s=B({data:o}),l=o.map(m=>(m-s)**2);return B({data:l})}function ct({data:o,headerMap:s={}}){if(!Array.isArray(o)||o.length===0)return"";const l=Object.keys(o[0]),m=o.map(d=>Object.values(d)),f=`| ${l.map(d=>s[d]??d).join(" | ")} |`,i=`| ${l.map(()=>"---").join(" | ")} |`,b=m.map(d=>`| ${d.join(" | ")} |`).join(`
`);return`${f}
${i}
${b}`}const pt=M({__name:"dynamic-values",props:{values:{}},emits:["update:values"],setup(o,{emit:s}){const l=o,m=s,f=E(),i=P(l,"values",m);async function b(){i.value.push(null),await I(),f.value.at(-1)?.focus()}function d(y){if(y===i.value.length-1){b();return}f.value.at(y+1)?.focus()}return(y,a)=>{const t=R,r=N,k=F;return w(),$("div",null,[(w(!0),$(U,null,A(n(i),(g,v)=>(w(),$("div",{key:v,"mb-2":"",flex:"","flex-nowrap":"","gap-2":""},[e(n(X),{ref_for:!0,ref:n(f).set,value:n(i)[v],"onUpdate:value":u=>n(i)[v]=u,"show-button":!1,placeholder:"Set your measure...",autofocus:"",onKeydown:O(u=>d(v),["enter"])},null,8,["value","onUpdate:value","onKeydown"]),e(k,{tooltip:"Delete this value"},{default:p(()=>[e(r,{circle:"",variant:"text",onClick:u=>n(i).splice(v,1)},{default:p(()=>[e(t,{component:n(D),depth:"3",size:"18"},null,8,["component"])]),_:1},8,["onClick"])]),_:2},1024)]))),128)),e(r,{onClick:b},{default:p(()=>[e(t,{component:n(L),depth:"3","mr-2":"",size:"18"},null,8,["component"]),a[0]||(a[0]=x(" Add a measure ",-1))]),_:1})])}}}),mt={"mb-5":"",flex:"","flex-1":"","flex-nowrap":"","justify-center":"","gap-12px":""},dt={flex:"","justify-center":""},_t={style:{flex:"0 0 100%"}},ft={style:{"max-width":"600px",margin:"0 auto"}},vt={"mx-auto":"","max-w-sm":"",flex:"","justify-center":"","gap-3":""},ht={"mt-5":"",flex:"","justify-center":"","gap-3":""},Ut=M({__name:"benchmark-builder",setup(o){const s=z("benchmark-builder:suites",[{title:"Suite 1",data:[5,10]},{title:"Suite 2",data:[8,12]}]),l=z("benchmark-builder:unit",""),m=a=>Math.round(a*1e3)/1e3,f=W(()=>s.value.map(({data:a,title:t})=>{const r=a.filter(T.isNumber);return{title:t,size:r.length,mean:B({data:r}),variance:ut({data:r})}}).sort((a,t)=>a.mean-t.mean).map(({mean:a,variance:t,size:r,title:k},g,v)=>{const u=l.value.trim(),_=v[0].mean,S=a-_,j=_===0?"∞":m(a/_),c=g!==0&&_!==a?` (+${m(S)}${u} ; x${j})`:"";return{position:g+1,title:k,mean:`${m(a)}${u}${c}`,variance:`${m(t)}${u}${u?"²":""}`,size:r}})),{copy:i}=q({createToast:!1}),b={position:"Position",title:"Suite",size:"Samples",mean:"Mean",variance:"Variance"};function d(){i(ct({data:f.value,headerMap:b}))}function y(){const a=f.value.flatMap(({title:t,...r})=>[` - ${t}`,...Object.entries(r).map(([k,g])=>`    - ${b[k]??k}: ${g}`)]).join(`
`);i(a)}return(a,t)=>{const r=Z,k=et,g=nt,v=Y,u=R,_=N,S=tt,j=Q;return w(),$(U,null,[e(S,{style:{flex:"1"},"x-scrollable":""},{default:p(()=>[h("div",mt,[(w(!0),$(U,null,A(n(s),(c,V)=>(w(),$("div",{key:V},[e(v,{style:{width:"294px"}},{default:p(()=>[e(r,{value:c.title,"onUpdate:value":C=>c.title=C,"label-position":"left",label:"Suite name",placeholder:"Suite name...",clearable:""},null,8,["value","onUpdate:value"]),e(k),e(g,{label:"Suite values","show-feedback":!1},{default:p(()=>[e(pt,{values:c.data,"onUpdate:values":C=>c.data=C},null,8,["values","onUpdate:values"])]),_:2},1024)]),_:2},1024),h("div",dt,[n(s).length>1?(w(),G(_,{key:0,variant:"text",onClick:C=>n(s).splice(V,1)},{default:p(()=>[e(u,{component:n(D),depth:"3","mr-2":"",size:"18"},null,8,["component"]),t[4]||(t[4]=x(" Delete suite ",-1))]),_:1},8,["onClick"])):H("",!0),e(_,{variant:"text",onClick:C=>n(s).splice(V+1,0,{data:[0],title:`Suite ${n(s).length+1}`})},{default:p(()=>[e(u,{component:n(L),depth:"3","mr-2":"",size:"18"},null,8,["component"]),t[5]||(t[5]=x(" Add suite ",-1))]),_:1},8,["onClick"])])]))),128))])]),_:1}),h("div",_t,[h("div",ft,[h("div",vt,[e(r,{value:n(l),"onUpdate:value":t[0]||(t[0]=c=>J(l)?l.value=c:null),placeholder:"Unit (eg: ms)",label:"Unit","label-position":"left","mb-4":""},null,8,["value"]),e(_,{onClick:t[1]||(t[1]=c=>s.value=[{title:"Suite 1",data:[]},{title:"Suite 2",data:[]}])},{default:p(()=>[...t[6]||(t[6]=[x(" Reset suites ",-1)])]),_:1})]),e(j,{data:n(f),headers:b},null,8,["data"]),h("div",ht,[e(_,{onClick:t[2]||(t[2]=c=>d())},{default:p(()=>[...t[7]||(t[7]=[x(" Copy as markdown table ",-1)])]),_:1}),e(_,{onClick:t[3]||(t[3]=c=>y())},{default:p(()=>[...t[8]||(t[8]=[x(" Copy as bullet list ",-1)])]),_:1})])])])],64)}}});export{Ut as default};
