import{d as c,n as v,b as z,v as _,f as g,o as w,g as p,m,j as u,y as D,x as C,w as f,i as d,k as b}from"./index-DtXg1mwU.js";import{w as k}from"./defaults-CMtlFFSf.js";const x={"gmail.com":{removeDots:!0,stripPlus:!0},"googlemail.com":{removeDots:!0,stripPlus:!0,renameDomain:"gmail.com"},"hotmail.com":{removeDots:!1,stripPlus:!0},"live.com":{removeDots:!0,stripPlus:!0},"outlook.com":{removeDots:!1,stripPlus:!0}};function y({email:l}){if(!E({email:l}))throw new Error("Invalid email");const o=l.trim().toLowerCase(),[i,t]=o.split("@"),a=x[t];if(!a)return o;const{removeDots:e,stripPlus:r,renameDomain:s}=a,{normalizedIdentifier:n}=P({identifier:i,removeDots:e,stripPlus:r});return`${n}@${s??t}`}function P({identifier:l,removeDots:o,stripPlus:i}){let t=l;return o&&(t=t.replace(/\./g,"")),i&&(t=t.split("+")[0]),{normalizedIdentifier:t}}function E({email:l}){return typeof l!="string"?!1:l.trim().match(/^[\w.%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/i)!==null}const N={class:"mt-4 flex justify-center gap-2"},j=c({__name:"email-normalizer",setup(l){const o=v(""),i=z(()=>o.value?o.value.split(`
`).map(a=>k(()=>y({email:a}),`Unable to parse email: ${a}`)).join(`
`):""),{copy:t}=_({source:i,text:"Normalized emails copied to the clipboard",createToast:!0});return(a,e)=>{const r=C,s=b;return w(),g("div",null,[e[5]||(e[5]=p("div",{class:"mb-2"}," Raw emails to normalize: ",-1)),m(r,{value:u(o),"onUpdate:value":e[0]||(e[0]=n=>D(o)?o.value=n:null),placeholder:"Put your emails here (one per line)...",rows:"3",multiline:"",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",autofocus:"",monospace:""},null,8,["value"]),e[6]||(e[6]=p("div",{class:"mb-2 mt-4"}," Normalized emails: ",-1)),m(r,{value:u(i),placeholder:"Normalized emails will appear here...",rows:"3",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",multiline:"",readonly:"",monospace:""},null,8,["value"]),p("div",N,[m(s,{onClick:e[1]||(e[1]=n=>o.value="")},{default:f(()=>[...e[3]||(e[3]=[d(" Clear emails ",-1)])]),_:1}),m(s,{disabled:!u(i),onClick:e[2]||(e[2]=n=>u(t)())},{default:f(()=>[...e[4]||(e[4]=[d(" Copy normalized emails ",-1)])]),_:1},8,["disabled"])])])}}});export{j as default};
